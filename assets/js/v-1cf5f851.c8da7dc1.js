"use strict";(self.webpackChunkzcomposition=self.webpackChunkzcomposition||[]).push([[416],{3780:(n,e,a)=>{a.r(e),a.d(e,{data:()=>l});const l={key:"v-1cf5f851",path:"/composition/useDownloader/",title:"useDownloader",lang:"en-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"代码演示",slug:"代码演示",children:[{level:3,title:"基础使用",slug:"基础使用",children:[]}]},{level:2,title:"示例代码",slug:"示例代码",children:[{level:3,title:"参数",slug:"参数",children:[]}]}],filePathRelative:"composition/useDownloader/README.md",git:{updatedTime:1631780821e3,contributors:[{name:"yinzhenyu-su",email:"sharkrain@outlook.com",commits:1}]}}},7340:(n,e,a)=>{a.r(e),a.d(e,{default:()=>p});var l=a(6252),s=a(7717);const t=(0,l._)("h1",{id:"usedownloader",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#usedownloader","aria-hidden":"true"},"#"),(0,l.Uk)(" useDownloader")],-1),o=(0,l._)("p",null,"文件下载器",-1),r=(0,l._)("h2",{id:"代码演示",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#代码演示","aria-hidden":"true"},"#"),(0,l.Uk)(" 代码演示")],-1),i=(0,l._)("h3",{id:"基础使用",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#基础使用","aria-hidden":"true"},"#"),(0,l.Uk)(" 基础使用")],-1),u=(0,l._)("h2",{id:"示例代码",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#示例代码","aria-hidden":"true"},"#"),(0,l.Uk)(" 示例代码")],-1),c=(0,l._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,l._)("pre",{class:"language-typescript"},[(0,l._)("code",null,[(0,l._)("span",{class:"token keyword"},"import"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)(" useDownloader "),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)(),(0,l._)("span",{class:"token keyword"},"from"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},'"zcomposition"'),(0,l._)("span",{class:"token punctuation"},";"),(0,l.Uk)("\n\n"),(0,l._)("span",{class:"token keyword"},"const"),(0,l.Uk)(),(0,l._)("span",{class:"token function-variable function"},"handleDownload"),(0,l.Uk)(),(0,l._)("span",{class:"token operator"},"="),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)(),(0,l._)("span",{class:"token operator"},"=>"),(0,l.Uk)(),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("\n  "),(0,l._)("span",{class:"token comment"},"// 默认会从url中提取文件名"),(0,l.Uk)("\n  "),(0,l._)("span",{class:"token function"},"useDownloader"),(0,l._)("span",{class:"token punctuation"},"("),(0,l._)("span",{class:"token punctuation"},"{"),(0,l.Uk)("url"),(0,l._)("span",{class:"token operator"},":"),(0,l.Uk)(),(0,l._)("span",{class:"token string"},'"https://file-examples-com.github.io/uploads/2018/04/file_example_AVI_480_750kB.avi"'),(0,l._)("span",{class:"token punctuation"},"}"),(0,l._)("span",{class:"token punctuation"},")"),(0,l.Uk)("\n"),(0,l._)("span",{class:"token punctuation"},"}"),(0,l.Uk)("\n")])]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"4"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"5"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"6"),(0,l._)("br")])],-1),d=(0,l._)("h3",{id:"参数",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#参数","aria-hidden":"true"},"#"),(0,l.Uk)(" 参数")],-1),_=(0,l._)("table",null,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"参数"),(0,l._)("th",null,"说明"),(0,l._)("th",null,"类型"),(0,l._)("th",null,"默认值")])]),(0,l._)("tbody",null,[(0,l._)("tr",null,[(0,l._)("td",null,"url"),(0,l._)("td",null,"文件链接"),(0,l._)("td",null,[(0,l._)("code",null,"string")]),(0,l._)("td",null,"-")]),(0,l._)("tr",null,[(0,l._)("td",null,"filename"),(0,l._)("td",null,"要保存的文件名"),(0,l._)("td",null,[(0,l._)("code",null,"string")]),(0,l._)("td",null,"-")])])],-1),p=(0,l.aZ)({setup(n){const e=()=>{(0,s.dY)({url:"https://file-examples-com.github.io/uploads/2018/04/file_example_AVI_480_750kB.avi"})};return(n,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[t,o,r,i,(0,l._)("p",null,[(0,l._)("button",{onClick:e},"点击下载文件")]),u,c,d,_],64))}})},7717:(n,e,a)=>{a.d(e,{Vd:()=>c,dY:()=>i});var l=a(9669),s=a.n(l),t=a(6486);a(577);var o=a(3162),r=a(2262);const i=({url:n="",filename:e=""})=>{const a=n.split("/"),l=e||a[a.length-1],t=(0,r.qj)({downloading:!1,request:{}});return t.request=new Promise(((e,a)=>{t.downloading=!0,s().get(n,{responseType:"blob"}).then((n=>{(0,o.saveAs)(n.data,l),e(n.data)})).catch((n=>{a(n)})).finally((()=>{t.downloading=!1}))})),t};var u=a(6252);const c=({onClickAway:n,target:e})=>{const a=a=>{if((0,t.isArray)(e.value)){if(!e.value.length)throw new Error("目标元素数组不能为空");e.value.includes(a.target)||n(a)}else e.value!==a.target&&n&&n(a)};(0,u.bv)((()=>{window.addEventListener("click",a)})),(0,u.Jd)((()=>{window.removeEventListener("click",a)}))}}}]);